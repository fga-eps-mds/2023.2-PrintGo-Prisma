// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
//   provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum EmpressoraStatus {
    ATIVA
    DESATIVA
}

enum Cargo {
    USER
    ADMIN
}

model User {
    id    String     @id @default(cuid())
    email String  @unique 
    nome  String 
    senha String
    documento String
    unidade_id String
    impressoes Impressao[]
    cargos Cargo[] @default([USER])
    unidade Unidade  @relation(fields: [unidade_id], references: [id])
    @@map("users")
}

model Unidade {
    id String @id @default(cuid())
    id_referencia_schedule String
    nome String @unique
    logradouro String
    complemento String
    bairro String
    cidade String
    cep String
    numero Int
    usuarios User[]
    @@map("unidades")
}

model Impressora {
    id String @id @default(cuid())
    endereco_ip String
    modelo String
    localizacao String
    marca String
    status EmpressoraStatus @default(DESATIVA)
    numero_impressora String
    impressoes Impressao[]
    @@map("impressoras")
}

model Impressao {
    id String @id @default(cuid())
    impressora_id String
    user_id String
    data_impressao DateTime @default(now())
    nome_documento String
    numero_paginas Int
    user User @relation(fields: [user_id], references: [id])
    impressora Impressora @relation(fields: [impressora_id], references: [id])
    @@map("impressoes")
}